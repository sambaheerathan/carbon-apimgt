{{js "js/index.js"}}

<div class="panel-group form-group accordion" role="tablist" aria-multiselectable="true">
    <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="collapse-{{@params.executionFlow.id}}" data-toggle="collapse"
             href="#pipeline-{{@params.executionFlow.id}}" aria-expanded="false"
             aria-controls="pipeline-{{@params.executionFlow.id}}">
            <h4 class="panel-title">
                <label class="radio-block">
                    <span class="fw-stack fw-lg">
                        <i class="fw fw-circle fw-stack-2x fw-inverse"></i>
                        <i class="fw fw-number fw-stack-1x">{{@params.executionFlow.id}}</i>
                    </span>
                </label>
                <div>
                    <div class="heading">{{i18n "Condition.Group"}}</div>
                    <div class="description truncate title" title="">
                        <a href="#" id="executionFlow-desc-{{@params.executionFlow.id}}" data-type="text" data-pk="1"
                           data-title="{{i18n " Enter.Description"}}">{{@params.executionFlow.description}}</a>
                    </div>
                </div>
                <div class="clearfix"></div>
            </h4>
        </div>
        <div id="pipeline-{{@params.executionFlow.id}}" class="panel-collapse collapse" role="tabpanel"
             aria-labelledby="collapse-{{@params.executionFlow.id}}">
            <div class="panel-body">
                <div class="row">
                    <div class='wr-advance-operations'>
                        <div class="wr-hidden-operations-nav col-lg-4">
                            <a href="javascript:void(0)"
                               onclick="showAdvanceOperation('ip-condition-{{@params.executionFlow.id}}', this, '{{@params.executionFlow.id}}')"
                               class="selected">
                                <span class="wr-hidden-operations-icon fw-stack">
                                    <i class="fw fw-key fw-stack-2x"></i>
                                </span>
                                {{i18n "IP.Condition"}}
                                {{#each @params.executionFlow.conditions}}
                                    {{#if IP}}
                                        {{#if enabled}}
                                            <span id="ip-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-success status-icon"><i
                                                    id="ip-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-check"></i></span>
                                        {{else}}
                                            <span id="ip-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-configured status-icon"><i
                                                    id="ip-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-circle-outline"></i></span>
                                        {{/if}}
                                    {{/if}}
                                {{/each}}
                            </a>
                            <a href="javascript:void(0)"
                               onclick="showAdvanceOperation('header-condition-{{@params.executionFlow.id}}', this, '{{@params.executionFlow.id}}')">
                                <span class="wr-hidden-operations-icon fw-stack">
                                    <i class="fw fw-key fw-stack-2x"></i>
                                </span>
                                {{i18n "Header.Condition"}}
                                {{#each @params.executionFlow.conditions}}
                                    {{#if Header}}
                                        {{#if ../enabled}}
                                            <span id="header-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-success status-icon"><i
                                                    id="header-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-check"></i></span>
                                        {{else}}
                                            <span id="header-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-configured status-icon"><i
                                                    id="header-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-circle-outline"></i></span>
                                        {{/if}}
                                    {{/if}}
                                {{/each}}
                            </a>
                            <a href="javascript:void(0)"
                               onclick="showAdvanceOperation('query-param-condition-{{@params.executionFlow.id}}', this, '{{@params.executionFlow.id}}')">
                                <span class="wr-hidden-operations-icon fw-stack">
                                    <i class="fw fw-key fw-stack-2x"></i>
                                </span>
                                {{i18n "Query.Param.Condition"}}
                                {{#each @params.executionFlow.conditions}}
                                    {{#if QueryParam}}
                                        {{#if ../enabled}}
                                            <span id="queryparam-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-success status-icon"><i
                                                    id="queryparam-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-check"></i></span>
                                        {{else}}
                                            <span id="queryparam-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-configured status-icon"><i
                                                    id="queryparam-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-circle-outline"></i></span>
                                        {{/if}}
                                    {{/if}}
                                {{/each}}
                            </a>
                            <a href="javascript:void(0)"
                               onclick="showAdvanceOperation('jwt-claim-condition-{{@params.executionFlow.id}}', this, '{{@params.executionFlow.id}}')">
                                <span class="wr-hidden-operations-icon fw-stack">
                                    <i class="fw fw-key fw-stack-2x"></i>
                                </span>
                                {{i18n "JWT.Claim.Condition"}}
                                {{#each @params.executionFlow.conditions}}
                                    {{#if JWTClaim}}
                                        {{#if ../enabled}}
                                            <span id="claim-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-success status-icon"><i
                                                    id="claim-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-check"></i></span>
                                        {{else}}
                                            <span id="claim-condition-configured-{{@params.executionFlow.id}}"
                                                  class="has-configured status-icon"><i
                                                    id="claim-condition-configured-icon-{{@params.executionFlow.id}}"
                                                    class="fw fw-circle-outline"></i></span>
                                        {{/if}}
                                    {{/if}}
                                {{/each}}
                            </a>
                        </div>
                        <div class="wr-hidden-operations-content col-lg-8">
                            <!-- IP Condition policy -->
                            {{#each @params.executionFlow.conditions}}
                                {{#if IP}}
                                    <div class="wr-hidden-operation"
                                         data-operation="ip-condition-{{@params.executionFlow.id}}"
                                         style="display: block">
                                        <div class="panel panel-default operation-data"
                                             data-operation="ip-condition-policy"
                                             data-operation-code="IP_CONDITION_POLICY">
                                            <div id="ip-condition-heading-{{@params.executionFlow.id}}"
                                                 class="panel-heading" role="tab">
                                                <h2 class="sub-title panel-title">
                                                    {{i18n "IP.Condition.Policy"}}
                                                    <label id="ip-condition-lbl-{{@params.executionFlow.id}}"
                                                           class="wr-input-control switch" data-toggle="collapse"
                                                           data-target="#ip-condition-body-{{@params.executionFlow.id}}">
                                                        <input id="ip-condition-checkbox-{{@params.executionFlow.id}}"
                                                               onclick="changeStatusIcon({{@params.executionFlow.id}},'IP', this)"
                                                               {{#if enabled}}checked{{/if}} type="checkbox"/>
                                                        <span class="helper"></span>
                                                        <span class="text"></span>
                                                    </label>
                                                    <hr>
                                                    <div class="panel-title-description">
                                                        {{i18n "This.configuration.is.used.to.throttle.based.on.address"}}

                                                    </div>
                                                </h2>
                                            </div>
                                            <div id="ip-condition-body-{{@params.executionFlow.id}}"
                                                 class="panel-collapse collapse"
                                                 role="tabpanel"
                                                 aria-labelledby="ip-condition-body-{{@params.executionFlow.id}}">
                                                <div id="ip-condition-feature-error-msg-{{@params.executionFlow.id}}"
                                                     class="alert alert-danger hidden" role="alert">
                                                    <i class="icon fw fw-error"></i><span></span>
                                                </div>

                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="ip-condition-type">{{i18n "IP.Condition.Type"}} :
                                                            <span
                                                                    class="requiredAstrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <select onchange="onIpConditionChange('{{@params.executionFlow.id}}', this);"
                                                                    class="form-control select required valid"
                                                                    id="ip-condition-type-{{@params.executionFlow.id}}"
                                                                    name="ip-condition-type-{{@params.executionFlow.id}}">
                                                                {{#if specific }}
                                                                    <option value="specificIp" selected>
                                                                        {{i18n "Specific.IP"}}
                                                                    </option>
                                                                    <option value="IPRange">{{i18n "IP.Range"}}
                                                                    </option>
                                                                {{else}}
                                                                    <option value="specificIp">
                                                                        {{i18n "Specific.IP"}}
                                                                    </option>
                                                                    <option value="IPRange" selected>
                                                                        {{i18n "IP.Range"}}
                                                                    </option>
                                                                {{/if}}
                                                            </select>
                                                        </div>
                                                    </div>
                                                    {{#if specific }}
                                                        <div class="form-group" style="display:block"
                                                             id="specific-ip-block-{{@params.executionFlow.id}}">
                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "IP.Address"}} :
                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-9">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="specific-ip-address-input-{{@params.executionFlow.id}}"
                                                                       name="specific-ip-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus" value="{{specificIP}}">
                                                            </div>
                                                        </div>

                                                        <div class="form-group" style="display:none"
                                                             id="ip-range-block-{{@params.executionFlow.id}}">
                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "Start.IP.Address"}} :
                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-3">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="ip-range-start-address-input-{{@params.executionFlow.id}}"
                                                                       name="ip-range-start-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus" value="">
                                                            </div>

                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "End.IP.Address"}} :
                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-3">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="ip-range-end-address-input-{{@params.executionFlow.id}}"
                                                                       name="ip-range-end-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus" value="">
                                                            </div>
                                                        </div>
                                                    {{else}}
                                                        <div class="form-group" style="display:none"
                                                             id="specific-ip-block-{{@params.executionFlow.id}}">
                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "IP.Address"}} :
                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-9">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="specific-ip-address-input-{{@params.executionFlow.id}}"
                                                                       name="specific-ip-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus" value="">
                                                            </div>
                                                        </div>

                                                        <div class="form-group" style="display:block"
                                                             id="ip-range-block-{{@params.executionFlow.id}}">
                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "Start.IP.Address"}} :

                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-3">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="ip-range-start-address-input-{{@params.executionFlow.id}}"
                                                                       name="ip-range-start-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus"
                                                                       value="{{../../startingIP}}">
                                                            </div>

                                                            <label class="control-label col-sm-3"
                                                                   for="request-count">{{i18n "End.IP.Address"}} :
                                                                <span
                                                                        class="requiredAstrix">*</span></label>
                                                            <div class="col-sm-3">
                                                                <input type="text"
                                                                       class="form-control required validInput"
                                                                       id="ip-range-end-address-input-{{@params.executionFlow.id}}"
                                                                       name="ip-range-end-address-input-{{@params.executionFlow.id}}"
                                                                       autofocus="autofocus" value="{{../../endingIP}}">
                                                            </div>
                                                        </div>
                                                    {{/if}}
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="ip-invert-condition">{{i18n "Invert.Condition"}} :
                                                        </label>
                                                        <div class="col-sm-9">
                                                            <label id="ip-condition-lbl-{{@params.executionFlow.id}}"
                                                                   class="wr-input-control switch">
                                                                <input id="ip-condition-invert-{{@params.executionFlow.id}}"
                                                                       {{#if ../invertCondition}}checked{{/if}}
                                                                       type="checkbox"/>
                                                                <span class="helper"></span>
                                                                <span class="text"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {{/if}}
                            {{/each}}
                            <!-- End of IP Condition policy -->

                            <!-- Header Condition policy -->
                            {{#each @params.executionFlow.conditions}}
                                {{#if Header}}
                                    <div class="wr-hidden-operation"
                                         data-operation="header-condition-{{@params.executionFlow.id}}"
                                         style="display: none">
                                        <div class="panel panel-default operation-data"
                                             data-operation="header-condition-policy"
                                             data-operation-code="HEADER_CONDITION_POLICY">
                                            <div id="header-condition-policy-heading" class="panel-heading" role="tab">
                                                <h2 class="sub-title panel-title">
                                                    {{i18n "Header.Condition.Policy"}}
                                                    <label id="header-condition-lbl-{{@params.executionFlow.id}}"
                                                           class="wr-input-control switch" data-toggle="collapse"
                                                           data-target="#header-condition-body-{{@params.executionFlow.id}}">
                                                        <input id="header-condition-checkbox-{{@params.executionFlow.id}}"
                                                               onclick="changeStatusIcon({{@params.executionFlow.id}}, 'Header', this)"
                                                               {{#if ../enabled}}checked{{/if}} type="checkbox"/>
                                                        <span class="helper"></span>
                                                        <span class="text"></span>
                                                    </label>
                                                    <hr>
                                                    <div class="panel-title-description">
                                                        {{i18n "This.configuration.is.used.to.throttle.based.on.headers"}}
                                                    </div>
                                                </h2>
                                            </div>
                                            <div id="header-condition-body-{{@params.executionFlow.id}}"
                                                 class="panel-collapse panel-body collapse {{#if enabled}}in{{/if}}"
                                                 role="tabpanel"
                                                 aria-labelledby="header-condition-body-{{@params.executionFlow.id}}">
                                                <div id="header-condition-feature-error-msg-{{@params.executionFlow.id}}"
                                                     class="alert alert-danger hidden" role="alert">
                                                    <i class="icon fw fw-error"></i><span></span>
                                                </div>

                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="header-name">{{i18n "Header.Name"}} :
                                                            <span class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="header-name-{{@params.executionFlow.id}}"
                                                                   name="header-name-{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="header-name-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Name.of.the.header"}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="header-value">{{i18n "Param.Value"}} :
                                                            <span class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="header-value-{{@params.executionFlow.id}}"
                                                                   name="header-value-{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="header-value-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Value.of.the.header"}}
                                                            </p>
                                                        </div>

                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-offset-3 col-sm-9">
                                                            <button type="button"
                                                                    onclick="addHeader('{{@params.executionFlow.id}}')"
                                                                    id="add-new-header-{{@params.executionFlow.id}}"
                                                                    name="add-new-header-{{@params.executionFlow.id}}"
                                                                    class="btn btn-primary has-spinner">
                                                                {{i18n "Add"}}
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div
                                                            id="header-value-table-{{@params.executionFlow.id}}">
                                                        <table class="table table-striped table-condensed hide"
                                                               id="header-value-table-content-{{@params.executionFlow.id}}">
                                                            <thead>
                                                            <tr>
                                                                <th class="col-md-5">{{i18n "Header"}}</th>
                                                                <th class="col-md-5">{{i18n "Value"}}</th>
                                                                <th class="col-md-2">{{i18n "Action"}}</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            {{#each keyValPairs}}
                                                                <tr>
                                                                    <td>{{name}}</td>
                                                                    <td>{{value}}</td>
                                                                    <td>
                                                                        <button type="button"
                                                                                class="btn btn-primary has-spinner"
                                                                                onclick="removeHeaderRow(this, {{@params.executionFlow.id}})">
                                                                            {{i18n "Delete"}}
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            {{/each}}
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="header-invert-condition">{{i18n "Invert.Condition"}} :


                                                        </label>
                                                        <div class="col-sm-9">
                                                            <label id="header-condition-lbl-{{@params.executionFlow.id}}"
                                                                   class="wr-input-control switch">
                                                                <input id="header-condition-invert-{{@params.executionFlow.id}}"
                                                                       type="checkbox"
                                                                       {{#if ../invertCondition}}checked{{/if}} />
                                                                <span class="helper"></span>
                                                                <span class="text"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {{/if}}
                            {{/each}}
                            <!-- End of Header Condition policy -->

                            <!-- Query Param policy -->
                            {{#each @params.executionFlow.conditions}}
                                {{#if QueryParam}}
                                    <div class="wr-hidden-operation"
                                         data-operation="query-param-condition-{{@params.executionFlow.id}}"
                                         style="display: none">
                                        <div class="panel panel-default operation-data"
                                             data-operation="date-condition-{{@params.executionFlow.id}}"
                                             data-operation-code="QUERY_PARAM_CONDITION_POLICY">
                                            <div id="query-param-condition-heading-{{@params.executionFlow.id}}"
                                                 class="panel-heading" role="tab">
                                                <h2 class="sub-title panel-title">
                                                    {{i18n "Query.Param.Condition.Policy"}}
                                                    <label id="query-param-condition-lbl-{{@params.executionFlow.id}}"
                                                           class="wr-input-control switch" data-toggle="collapse"
                                                           data-target="#query-param-condition-body-{{@params.executionFlow.id}}">
                                                        <input id="query-param-condition-checkbox-{{@params.executionFlow.id}}"
                                                               onclick="changeStatusIcon({{@params.executionFlow.id}}, 'QueryParam', this)"
                                                               type="checkbox" {{#if ../enabled}}checked{{/if}} />
                                                        <span class="helper"></span>
                                                        <span class="text"></span>
                                                    </label>
                                                    <hr>
                                                    <div class="panel-title-description">
                                                        {{i18n "This.configuration.use.to.throttle.based.on.query.parameters"}}
                                                    </div>
                                                </h2>
                                            </div>
                                            <div id="query-param-condition-body-{{@params.executionFlow.id}}"
                                                 class="panel-collapse panel-body collapse {{#if ../enabled}}in{{/if}}"
                                                 role="tabpanel"
                                                 aria-labelledby="query-param-condition-body-{{@params.executionFlow.id}}">

                                                <div id="query-param-condition-policy-feature-error-msg"
                                                     class="alert alert-danger hidden" role="alert">
                                                    <i class="icon fw fw-error"></i><span></span>
                                                </div>
                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="query-param-name">{{i18n "Param.Name"}} :
                                                            <span class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="query-param-name-{{@params.executionFlow.id}}"
                                                                   name="query-param-name-{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="query-param-name-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Name.of.the.query.param"}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="query-param-name">{{i18n "Param.Value"}} :<span
                                                        class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="query-param-value-{{@params.executionFlow.id}}"
                                                                   name="query-param-value--{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="query-param-value-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Value.of.the.query.param"}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-offset-3 col-sm-9">
                                                            <button type="button"
                                                                    onclick="addQueryParam('{{@params.executionFlow.id}}')"
                                                                    id="add-new-query-param-{{@params.executionFlow.id}}"
                                                                    name="add-new-query-param-{{@params.executionFlow.id}}"
                                                                    class="btn btn-primary has-spinner">
                                                                {{i18n "Add"}}
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div
                                                            id="query-param-value-table-{{@params.executionFlow.id}}">
                                                        <table class="table table-striped table-condensed hide"
                                                               id="query-param-value-table-content-{{@params.executionFlow.id}}">
                                                            <thead>
                                                            <tr>
                                                                <th class="col-md-5">{{i18n "Query_Param"}}</th>
                                                                <th class="col-md-5">{{i18n "Value"}}</th>
                                                                <th class="col-md-2">{{i18n "Action"}}</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            {{#each keyValPairs}}
                                                                <tr>
                                                                    <td class="col-md-5">{{name}}</td>
                                                                    <td class="col-md-5">{{value}}</td>
                                                                    <td class="col-md-2">
                                                                        <button type="button"
                                                                                class="btn btn-primary has-spinner"
                                                                                onclick="removeQueryParamRow(this, {{@params.executionFlow.id}})">
                                                                            {{i18n "Delete"}}
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            {{/each}}
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="query-param-invert-condition">{{i18n "Invert.Condition"}} :

                                                        </label>
                                                        <div class="col-sm-9">
                                                            <label id="query-param-condition-lbl-{{@params.executionFlow.id}}"
                                                                   class="wr-input-control switch">
                                                                <input id="query-param-condition-invert-{{@params.executionFlow.id}}"
                                                                       {{#if ../invertCondition}}checked{{/if}}
                                                                       type="checkbox"/>
                                                                <span class="helper"></span>`
                                                                <span class="text"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {{/if}}
                            {{/each}}
                            <!-- End of Query Param Condition policy -->

                            <!-- JWT Claims condition policy -->
                            {{#each @params.executionFlow.conditions}}
                                {{#if JWTClaim}}
                                    <div class="wr-hidden-operation"
                                         data-operation="jwt-claim-condition-{{@params.executionFlow.id}}"
                                         style="display: none">
                                        <div class="panel panel-default operation-data"
                                             data-operation="jwt-claim-condition-{{@params.executionFlow.id}}"
                                             data-operation-code="JWT_CLAIMS_CONDITION_POLICY">
                                            <div id="jwt-claim-condition-heading-{{@params.executionFlow.id}}"
                                                 class="panel-heading" role="tab">
                                                <h2 class="sub-title panel-title">
                                                    {{i18n "JWT.Condition.Policy"}}
                                                    <label id="jwt-claims-condition-policy-lbl-{{@params.executionFlow.id}}"
                                                           class="wr-input-control switch" data-toggle="collapse"
                                                           data-target="#jwt-claim-condition-body-{{@params.executionFlow.id}}">
                                                        <input id="jwt-claim-condition-checkbox-{{@params.executionFlow.id}}"
                                                               onclick="changeStatusIcon({{@params.executionFlow.id}}, 'JWTClaim', this)"
                                                               type="checkbox" {{#if ../enabled}}checked{{/if}}/>
                                                        <span class="helper"></span>
                                                        <span class="text"></span>`
                                                    </label>
                                                    <hr>
                                                    <div class="panel-title-description">
                                                        {{i18n "This.configuration.is.used.to.define.JWT.claims.conditions"}}
                                                    </div>
                                                </h2>
                                            </div>
                                            <div id="jwt-claim-condition-body-{{@params.executionFlow.id}}"
                                                 class="panel-collapse panel-body collapse {{#if ../enabled}}in{{/if}}"
                                                 role="tabpanel"
                                                 aria-labelledby="jwt-claim-condition-body-{{@params.executionFlow.id}}">

                                                <div id="jwt-claims-condition-feature-error-msg-{{@params.executionFlow.id}}"
                                                     class="alert alert-danger hidden" role="alert">
                                                    <i class="icon fw fw-error"></i><span></span>
                                                </div>
                                                <div class="form-horizontal">
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="jwt-claim-name">{{i18n "Claim.Name"}} :
                                                            <span class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="jwt-claim-name-{{@params.executionFlow.id}}"
                                                                   name="jwt-claim-name-{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="jwt-claim-name-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Name.of.the.claim"}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="jwt-claim-name">{{i18n "Claim.Value"}} :
                                                            <span class="required-astrix">*</span></label>
                                                        <div class="col-sm-9">
                                                            <input type="text" class="form-control required validInput"
                                                                   id="jwt-claim-value-{{@params.executionFlow.id}}"
                                                                   name="jwt-claim-value-{{@params.executionFlow.id}}"
                                                                   autofocus="autofocus" value="">
                                                            <a class="icon-question-sign help_popup"
                                                               data-trigger="hover" help_data="name_help"
                                                               data-original-title="" title=""></a>
                                                            <p id="jwt-claim-value-help-{{@params.executionFlow.id}}"
                                                               class="hide">{{i18n "Value.of.the.JWT.claim"}}
                                                            </p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-offset-3 col-sm-9">
                                                            <button type="button"
                                                                    onclick="addJwtClaim('{{@params.executionFlow.id}}')"
                                                                    id="add-new-jwt-claim-{{@params.executionFlow.id}}"
                                                                    name="add-new-jwt-claim-{{@params.executionFlow.id}}"
                                                                    class="btn btn-primary has-spinner">
                                                                {{i18n "Add"}}
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div id="jwt-claim-value-table-{{@params.executionFlow.id}}">
                                                        <table class="table table-striped table-condensed hide"
                                                               id="jwt-claim-value-table-content-{{@params.executionFlow.id}}">
                                                            <thead>
                                                            <tr>
                                                                <th class="col-md-5">{{i18n "Claim"}}</th>
                                                                <th class="col-md-5">{{i18n "Value"}}</th>
                                                                <th class="col-md-2">{{i18n "Action"}}</th>
                                                            </tr>
                                                            </thead>
                                                            <tbody>
                                                            {{#each keyValPairs}}
                                                                <tr>
                                                                    <td>{{name}}</td>
                                                                    <td>{{value}}</td>
                                                                    <td>
                                                                        <button type="button"
                                                                                class="btn btn-primary has-spinner"
                                                                                onclick="removeJwtClaimRow(this, {{@params.executionFlow.id}})">
                                                                            {{i18n "Delete"}}
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            {{/each}}
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label col-sm-3"
                                                               for="jwt-claim-invert-condition">{{i18n "Invert.Condition"}} :

                                                        </label>
                                                        <div class="col-sm-9">
                                                            <label id="jwt-claim-condition-lbl-{{@params.executionFlow.id}}"
                                                                   class="wr-input-control switch">
                                                                <input id="jwt-claim-condition-invert-{{@params.executionFlow.id}}"
                                                                       type="checkbox"
                                                                       {{#if ../invertCondition}}checked{{/if}}/>
                                                                <span class="helper"></span>
                                                                <span class="text"></span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {{/if}}
                            {{/each}}
                            <!-- End of jwt claim Condition policy -->
                        </div>
                        <!-- End of Restrictions -->

                    </div>
                </div>
            </div>
            <div class="no-gutter">
                <div class="page-header">
                    <h2></h2>
                    <p class="lead">{{i18n "Execution_Policy"}}</p>
                </div>
                <div class="form-horizontal">
                    <div class="form-group">
                        <label class="control-label col-sm-3" for="policy-type">{{i18n "Request_Count"}} :
                            <a class="help_popup" help_data="execution-policy-level-help-{{@params.executionFlow.id}}"
                               data-trigger="hover" data-placement="bottom" data-original-title="" title=""><i
                                    class="fa fa-question-circle" data-original-title="" title=""></i></a>
                            <p id="execution-policy-level-help-{{@params.executionFlow.id}}" class="hide">
                                <strong>{{i18n "Request.Count"}}
                                </strong> {{i18n "Throttle.based.on.request.count"}}
                                <br><strong> {{i18n "Bandwidth"}} : </strong>
                                {{i18n "Throttle.Based.on.bandwidth"}}<br></p>
                        </label>
                        <div class="col-sm-9">
                            <select class="form-control select required valid"
                                    id="execution-policy-level-{{@params.executionFlow.id}}"
                                    name="execution-policy-level-{{@params.executionFlow.id}}"
                                    onchange="onExecutionFlowTypeChange('{{@params.executionFlow.id}}', this);">
                                <option value="requestCount" {{#if executionFlow.quotaPolicy.requestCount}}selected{{else}}{{#if executionFlow.quotaPolicy.type}}selected{{/if}}{{/if}}>{{i18n "Request Count"}}</option>
                                <option value="bandwidthVolume"
                                        {{#if executionFlow.quotaPolicy.bandwidth}}selected{{/if}}>{{i18n "Bandwidth"}}</option>
                            </select>
                        </div>
                    </div>
                    {{#if @params.executionFlow.quotaPolicy.requestCount}}
                        <div id="execution-flow-request-count-block-{{@params.executionFlow.id}}">
                            <div class="form-group">
                                <label class="control-label col-sm-3"
                                       for="execution-flow-request-count-{{@params.executionFlow.id}}">{{i18n "Request.Count"}} :
                                    <span class="required-astrix">*</span>
                                    <a class="help_popup"
                                       help_data="execution-flow-name_help-{{@params.executionFlow.id}}"
                                       data-trigger="hover" data-placement="bottom" data-original-title="" title=""><i
                                            class="fa fa-question-circle" data-original-title="" title=""></i></a>
                                    <p id="execution-flow-name_help-{{@params.executionFlow.id}}" class="hide">
                                        <strong>{{i18n "Request.Count"}} :
                                        </strong> {{i18n "Throttle.based.on.request.count"}}
                                        <br><strong> {{i18n "Bandwidth"}} :
                                    </strong>  {{i18n "Throttle.Based.on.bandwidth"}}<br></p>
                                </label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control noSpace"
                                           id="execution-flow-request-count-{{@params.executionFlow.id}}"
                                           name="execution-flow-request-count-{{@params.executionFlow.id}}"
                                           autofocus="autofocus"
                                           value="{{@params.executionFlow.quotaPolicy.limit.requestCount}}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="request-count">Time:
                                    <span class="required-astrix">*</span>
                                    <a class="help_popup" help_data="name_help" data-trigger="hover"
                                       data-placement="bottom" data-original-title="" title=""><i
                                            class="fa fa-question-circle" data-original-title="" title=""></i></a>
                                    <p id="name_help" class="hide">{{i18n "Time.Configuration"}}</p>
                                </label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control"
                                           id="execution-flow-request-count-request-unit-time-{{@params.executionFlow.id}}"
                                           name="execution-flow-unit-time-count-{{@params.executionFlow.id}}"
                                           autofocus="autofocus"
                                           value="{{@params.executionFlow.quotaPolicy.limit.unitTime}}">
                                </div>
                                <div class="col-sm-3">
                                    <select class="form-control select required valid"
                                            id="execution-flow-request-count-unit-{{@params.executionFlow.id}}"
                                            name="execution-flow-request-count-unit-{{@params.executionFlow.id}}">
                                        <option value="min">{{i18n "Minutes(s)"}}</option>
                                        <option value="hour">{{i18n "Hour(s)"}}</option>
                                        <option value="days">{{i18n "Day(s)"}}</option>
                                        <option value="month">{{i18n "Month(s)"}}</option>
                                        <option value="year">{{i18n "Year(s)"}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    {{/if}}
                        <div id="execution-flow-bandwidth-block-{{@params.executionFlow.id}}" class="hide">
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="request-count">Bandwidth:
                                    <span class="required-astrix">*</span>
                                    <a class="help_popup" help_data="name_help-{{@params.executionFlow.id}}"
                                       data-trigger="hover" data-placement="bottom" data-original-title="" title=""><i
                                            class="fa fa-question-circle" data-original-title="" title=""></i></a>
                                    <p id="name_help-{{@params.executionFlow.id}}" class="hide">
                                        <strong>{{i18n "Request.Count"}} :</strong>
                                        {{i18n "Throttle.based.on.request.count"}}
                                        <br><strong> {{i18n "Bandwidth"}} :</strong>
                                        {{i18n "Throttle.Based.on.bandwidth"}}<br></p>
                                </label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control required noSpace"
                                           id="execution-flow-bandwidth-{{@params.executionFlow.id}}"
                                           name="execution-flow-bandwidth-{{@params.executionFlow.id}}"
                                           autofocus="autofocus"
                                           value="{{@params.executionFlow.quotaPolicy.limit.dataAmount}}">
                                </div>
                                <div class="col-sm-3">
                                    <select class="form-control select required valid"
                                            id="execution-flow-bandwidth-unit-{{@params.executionFlow.id}}"
                                            name="bandwidth-unit">
                                        <option value="KB">KB</option>
                                        <option value="MB">MB</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-sm-3" for="request-count">Time:
                                    <span class="required-astrix">*</span>
                                    <a class="help_popup" help_data="name_help" data-trigger="hover"
                                       data-placement="bottom" data-original-title="" title=""><i
                                            class="fa fa-question-circle" data-original-title="" title=""></i></a>
                                    <p id="name_help" class="hide">{{i18n "Time.Configuration"}}</p>
                                </label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control"
                                           id="execution-flow-request-count-bandwidth-unit-time-{{@params.executionFlow.id}}"
                                           name="execution-flow-unit-time-count-{{@params.executionFlow.id}}"
                                           autofocus="autofocus"
                                           value="{{@params.executionFlow.quotaPolicy.limit.unitTime}}">
                                </div>
                                <div class="col-sm-3">
                                    <select class="form-control select required valid"
                                            id="execution-flow-request-count-unit-{{@params.executionFlow.id}}"
                                            name="execution-flow-request-count-unit-{{@params.executionFlow.id}}">
                                        <option value="min">{{i18n "Minutes(s)"}}</option>
                                        <option value="hour">{{i18n "Hour(s)"}}</option>
                                        <option value="days">{{i18n "Day(s)"}}</option>
                                        <option value="month">{{i18n "Month(s)"}}</option>
                                        <option value="year">{{i18n "Year(s)"}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>

    </div>

</div>

